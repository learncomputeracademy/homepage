<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="robots" content="noindex,nofollow" />
    <title>Learn Computer Academy Home Page</title>
    <link rel="icon" type="image/x-icon" href="https://www.google.com/s2/favicons?sz=64&domain_url=learncomputer.in">
    <link href="css/style.css" type="text/css" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    
    <!-- Libraries for Features -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.14.7/beautify.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.14.7/beautify-css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.14.7/beautify-html.min.js"></script>
    <script type="module">
        // Asynchronously import Terser for JS minification
        window.Terser = (await import('https://cdn.skypack.dev/terser')).default;
    </script>

    <style>
        /* General Modal & Panel Styles */
        .modal, .settings-panel { display: none; position: fixed; z-index: 2000; }
        .modal { left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.6); }
        .modal-content { background-color: var(--bg-color); color: var(--text-color); margin: 10% auto; padding: 25px; border: 1px solid var(--border-color); width: 80%; max-width: 700px; border-radius: 10px; box-shadow: var(--shadow); position: relative; font-family: sans-serif; }
        .modal-content h3 { margin-top: 0; color: var(--primary-color); }
        .modal-content ol { padding-left: 20px; }
        .modal-content li { margin-bottom: 10px; line-height: 1.6; }
        .modal-content code { background-color: var(--hover-bg); padding: 2px 5px; border-radius: 4px; font-family: 'Fira Code', monospace; }
        .close-button { color: var(--text-color); position: absolute; top: 10px; right: 20px; font-size: 28px; font-weight: bold; cursor: pointer; }
        #install-help-btn i, #settings-btn i { font-size: 36px; color: var(--text-color); transition: 0.3s ease-in-out; }
        #install-help-btn:hover i, #settings-btn:hover i { color: var(--primary-color); }

        /* Settings Panel */
        .settings-panel { bottom: 0; left: 0; width: 100%; background-color: var(--bg-color); border-top: 1px solid var(--border-color); box-shadow: 0 -4px 20px rgba(0,0,0,0.2); transform: translateY(100%); transition: transform 0.4s ease-in-out; height: 80vh; display: flex; flex-direction: column; }
        .settings-panel.active { display: flex; transform: translateY(0); }
        .settings-header { display: flex; justify-content: space-between; align-items: center; padding: 10px 20px; border-bottom: 1px solid var(--border-color); }
        .settings-tabs { display: flex; gap: 10px; flex-wrap: wrap; }
        .settings-tab { padding: 8px 16px; border: none; background: none; color: var(--text-color); cursor: pointer; font-family: 'Fira Code', monospace; font-size: 14px; border-radius: 6px; }
        .settings-tab.active { background-color: var(--primary-color); color: var(--white); }
        .settings-close-btn { font-size: 24px; cursor: pointer; color: var(--text-color); }
        .settings-content-area { flex-grow: 1; padding: 20px; overflow-y: auto; }
        .setting-content { display: none; }
        .setting-content.active { display: block; }
        
        /* Form styles for settings */
        .settings-section { margin-bottom: 25px; }
        .settings-section h4 { margin-top: 0; margin-bottom: 10px; color: var(--primary-color); border-bottom: 1px solid var(--border-color); padding-bottom: 5px; }
        .form-group { display: flex; flex-direction: column; gap: 5px; margin-bottom: 15px; }
        .form-group label { font-weight: bold; font-size: 14px; }
        .form-group input[type="text"], .form-group input[type="url"], .form-group input[type="color"], .form-group select { padding: 8px; border-radius: 6px; border: 1px solid var(--border-color); background-color: var(--hover-bg); color: var(--text-color); font-family: 'Fira Code', monospace; width: 100%; max-width: 400px; }
        .settings-btn { padding: 10px 15px; border-radius: 6px; border: none; background-color: var(--primary-color); color: var(--white); font-weight: bold; cursor: pointer; transition: background-color 0.3s; }
        .settings-btn:hover { background-color: #e66a00; }

        /* Code Formatter Styles */
        #formatter-tool { display: flex; flex-direction: column; height: 100%; }
        .formatter-controls { display: flex; align-items: center; gap: 15px; flex-wrap: wrap; margin-bottom: 15px; }
        .formatter-editors { display: flex; flex-grow: 1; gap: 10px; min-height: 250px; }
        .formatter-editors textarea { width: 50%; height: 100%; resize: none; padding: 10px; font-family: 'Fira Code', monospace; font-size: 14px; border: 1px solid var(--border-color); border-radius: 8px; background-color: var(--hover-bg); color: var(--text-color); }
        .formatter-actions { display: flex; justify-content: center; gap: 10px; padding-top: 15px; }
        .action-btn { padding: 10px 20px; border-radius: 6px; border: none; background-color: var(--primary-color); color: var(--white); font-weight: bold; cursor: pointer; transition: background-color 0.3s; display: flex; align-items: center; gap: 5px; }
        .action-btn:disabled { background-color: #ccc; cursor: not-allowed; }
        .action-btn.secondary { background-color: #6c757d; }
    </style>
</head>
<body data-theme="light">
    <!-- Static Widgets -->
    <div class="top-bar">
        <div class="weather-info" id="weather-widget">
            <span class="weather-icon"></span>
            <span class="weather-temp"></span>
        </div>
        <div class="time-info" id="time-widget">
            <span class="time-display"></span>
            <svg class="time-icon" width="24" height="24" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10" fill="none" stroke="var(--text-color)" stroke-width="2"/>
                <line id="hourHand" x1="12" y1="12" x2="12" y2="6" stroke="var(--text-color)" stroke-width="2" stroke-linecap="round"/>
                <line id="minuteHand" x1="12" y1="12" x2="12" y2="4" stroke="var(--text-color)" stroke-width="1.5" stroke-linecap="round"/>
                <line id="secondHand" x1="12" y1="12" x2="12" y2="3" stroke="var(--primary-color)" stroke-width="1" stroke-linecap="round"/>
            </svg>
        </div>
    </div>
    
    <canvas id="gridCanvas"></canvas>
    
    <main>
        <div class="container">
            <div class="logo-block">
                <a href="https://learncomputer.in/" target="_blank" rel="nofollow">
                  <img src="images/logo.png" data-dark-src="images/logo-light.png" alt="Logo" class="theme-logo">
                </a>
            </div>
            <div class="nav-links" id="search-tabs">
                <ul>
                    <li><a href="#" class="active" data-type="web">Web</a></li>
                    <li><a href="#" data-type="images">Images</a></li>
                    <li><a href="#" data-type="videos">Videos</a></li>
                    <li><a href="#" data-type="news">News</a></li>
                    <li><a href="#" onclick="window.open('https://playground.learncomputer.in/search/', '_blank');">Advanced</a></li>
                </ul>
            </div>
            <div class="search-bar">
                <div class="custom-dropdown">
                    <div class="selected-option">
                        <img src="images/google.png" alt="Selected" class="dropdown-img">
                        <i class="arrow"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M16.53 8.97a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06L12 12.44l3.47-3.47a.75.75 0 0 1 1.06 0" clip-rule="evenodd"/></svg></i>
                    </div>
                    <ul class="dropdown-options">
                        <li data-value="google"><img src="images/google.png" alt="Google"></li>
                        <li data-value="freepik"><img src="images/freepik.png" alt="Freepik"></li>
                        <li data-value="flaticon"><img src="images/flaticon.png" alt="Flaticon"></li>
                        <li data-value="pinterest"><img src="images/pinterest.png" alt="Pinterest"></li>
                        <li data-value="pexels"><img src="images/pexels.png" alt="pexels"></li>
                        <li data-value="codepen"><img src="images/codepen.png" alt="CodePen"></li>
                        <li data-value="themeforest"><img src="images/themeforest.png" alt="ThemeForest"></li>
                        <li data-value="youtube"><img src="images/youtube.png" alt="YouTube"></li>
                        <li data-value="amazon"><img src="images/amazon.png" alt="Amazon"></li>
                        <li data-value="bing"><img src="images/bing-e1535596079626-100x46.png" alt="Bing"></li>
                        <li data-value="yahoo"><img src="images/yahoo.png" alt="Yahoo"></li>
                        <li data-value="wikipedia"><img src="images/wikipedia-100x50.png" alt="Wikipedia"></li>
                        <li data-value="duckduckgo"><img src="images/duckduckgo.png" alt="DuckDuckGo"></li>
                        <li data-value="askcom"><img src="images/askcom-e1535595197682-100x41.png" alt="Ask.com"></li>
                        <li data-value="aol"><img src="images/aol1-e1535595499271-100x38.png" alt="AOL"></li>
                        <li data-value="facebook"><img src="images/facebook.png" alt="Facebook"></li>
                        <li data-value="reddit"><img src="images/reddit.png" alt="Reddit"></li>
                        <li data-value="twitter"><img src="images/twitter.png" alt="Twitter"></li>
                        <li data-value="ebay"><img src="images/ebay-100x50.png" alt="eBay"></li>
                        <li data-value="instagram"><img src="images/instagram-100x50.png" alt="Instagram"></li>
                        <li data-value="imdb"><img src="images/imdb.png" alt="IMDb"></li>
                        <li data-value="espn"><img src="images/espn.png" alt="ESPN"></li>
                        <li data-value="godaddy"><img src="images/godaddy.png" alt="GoDaddy"></li>
                        <li data-value="dictionary"><img src="images/dictionary-com.png" alt="Dictionary"></li>
                    </ul>
                </div>
                <input type="hidden" id="selectedValue">
                <input type="text" placeholder="Search the web...">
                <button><i class='bx bx-search'></i></button>
            </div>
            <ul class="box-container"></ul>
        </div>
    </main>

    <!-- Bottom Nav Updated with new Settings Button -->
    <section class="bottom-nav">
        <div class="container">
            <ul>
                <li><a href="https://review.computercenter.in/" target="_blank" rel="nofollow" title="Review Learn Computer Academy"><img src="images/google-reviews.png" alt="Google Reviews"></a></li>
                <li><a href="#" id="install-help-btn" title="How to Install Extension"><i class='bx bx-help-circle'></i></a></li>
                <li><a href="#" id="settings-btn" title="Settings"><i class='bx bx-cog'></i></a></li>
                <li><a href="./files/NetworkReset-RunAsAdminstrator.bat" target="_blank" rel="nofollow" title="Network Reset Code for Windows PC"><img src="images/network-reset.png" alt="Network Reset"></a></li>
            </ul>
        </div>
    </section>

    <button id="themeToggle" class="theme-toggle">
      <span class="bulb"></span>
    </button>

    <div id="install-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h3>How to Install the Chrome Extension</h3>
            <ol>
                <li><strong>Download:</strong> &nbsp; &nbsp;Download the Plugin by clicking this link: <a href="https://homepage.computercenter.in/lca-homepage-extension.zip" style="color:#ff7810" download="lca-homepage-extension.zip" target="_blank" rel="noopener noreferrer">Download Now</a>. If clicking doesn't work, copy the link and paste it into a new tab.</li>
                <li><strong>Unzip the File:</strong> Once downloaded, unzip the <code>lca-homepage-extension.zip</code> file. This will create a folder. Place this folder somewhere permanent (like your Desktop or Documents).</li>
                <li><strong>Open Chrome Extensions:</strong> In Chrome, go to <code>chrome://extensions</code>.</li>
                <li><strong>Enable Developer Mode:</strong> Turn on the "Developer mode" switch in the top-right corner.</li>
                <li><strong>Load the Extension:</strong> Click "Load unpacked" and select the folder you unzipped in step 2.</li>
            </ol>
            <p><strong>Note:</strong> Chrome will show a warning pop-up on startup. This is normal for extensions not from the store. Just click "X" to close it.</p>
        </div>
    </div>

    <!-- Combined Settings & Tools Panel -->
    <div id="settings-panel" class="settings-panel">
        <div class="settings-header">
            <div class="settings-tabs">
                <button class="settings-tab active" data-tab="background-settings">Background</button>
                <button class="settings-tab" data-tab="formatter-tool">Code Formatter</button>
            </div>
            <i class='bx bx-x settings-close-btn'></i>
        </div>
        <div class="settings-content-area">
            <!-- Background Settings -->
            <div id="background-settings" class="setting-content active">
                <div class="settings-section">
                    <h4>Background Type</h4>
                    <div class="form-group">
                        <label><input type="radio" name="bg-type" value="grid"> Grid</label>
                        <label><input type="radio" name="bg-type" value="solid"> Solid Color</label>
                        <label><input type="radio" name="bg-type" value="image"> Custom Image URL</label>
                        <label><input type="radio" name="bg-type" value="unsplash"> Daily Photo from Unsplash</label>
                    </div>
                </div>
                <div id="solid-color-picker" class="form-group" style="display: none;"><label for="bg-color-input">Choose Color</label><input type="color" id="bg-color-input"></div>
                <div id="image-url-input" class="form-group" style="display: none;"><label for="bg-image-url">Image URL</label><input type="url" id="bg-image-url" placeholder="https://example.com/image.png"><button id="set-image-bg-btn" class="settings-btn" style="margin-top: 5px;">Set Image</button></div>
            </div>
            <!-- Code Formatter Tool -->
            <div id="formatter-tool" class="setting-content">
                <div class="formatter-controls">
                    <label for="code-language">Language:</label>
                    <select id="code-language"><option value="html">HTML</option><option value="css">CSS</option><option value="javascript">JavaScript</option><option value="php">PHP (Minify Only)</option></select>
                    <label for="indent-size">Indent:</label>
                    <select id="indent-size"><option value="2">2 Spaces</option><option value="4" selected>4 Spaces</option><option value="tab">Tabs</option></select>
                </div>
                <div class="formatter-editors">
                    <textarea id="input-code" placeholder="Paste your code here..."></textarea>
                    <textarea id="output-code" readonly placeholder="Result will appear here..."></textarea>
                </div>
                <div class="formatter-actions">
                    <button id="beautify-btn" class="action-btn"><i class='bx bx-magic-wand'></i> Beautify</button>
                    <button id="minify-btn" class="action-btn"><i class='bx bx-compress-alt'></i> Minify</button>
                    <button id="copy-btn" class="action-btn secondary"><i class='bx bx-copy'></i> Copy</button>
                    <button id="clear-btn" class="action-btn secondary"><i class='bx bx-trash'></i> Clear</button>
                </div>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener("DOMContentLoaded", function () {
        // --- Core UI Logic (Search, Theme, Modals etc.) ---
        const modal = document.getElementById("install-modal");
        const btn = document.getElementById("install-help-btn");
        const span = document.querySelector("#install-modal .close-button");
        if(btn && modal && span) {
            btn.onclick = (e) => { e.preventDefault(); modal.style.display = "block"; }
            span.onclick = () => { modal.style.display = "none"; }
            window.addEventListener('click', (event) => { if (event.target == modal) modal.style.display = "none"; });
        }
        
        // --- Fetch and Render Quick Links from homepage.json ---
        fetch('homepage.json')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok ' + response.statusText);
                }
                return response.json();
            })
            .then(data => {
                const boxContainer = document.querySelector('.box-container');
                boxContainer.innerHTML = '';
                data.forEach(link => {
                    const li = document.createElement('li');
                    li.innerHTML = `<a class="box" href="${link.href}" target="_blank" rel="nofollow"><img src="${link.imgSrc}" alt="${link.alt}" onerror="this.src='https://placehold.co/64x64/eee/333?text=Icon'"></a>`;
                    boxContainer.appendChild(li);
                });
            })
            .catch(error => {
                console.error('Error fetching or parsing homepage.json:', error);
                const boxContainer = document.querySelector('.box-container');
                boxContainer.innerHTML = `<p style="color: var(--text-color); grid-column: 1 / -1;">Could not load quick links.</p>`;
            });


        // --- Settings & Tools Panel Logic ---
        const settingsPanel = document.getElementById('settings-panel');
        const openSettingsBtn = document.getElementById('settings-btn');
        const closeSettingsBtn = document.querySelector('.settings-close-btn');
        
        openSettingsBtn.addEventListener('click', (e) => {
            e.preventDefault();
            settingsPanel.classList.toggle('active');
        });
        closeSettingsBtn.addEventListener('click', () => settingsPanel.classList.remove('active'));

        const tabs = document.querySelectorAll('.settings-tab');
        const settingContents = document.querySelectorAll('.setting-content');
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                settingContents.forEach(sc => sc.classList.remove('active'));
                document.getElementById(tab.dataset.tab).classList.add('active');
            });
        });
        
        // --- Customizable Backgrounds ---
        const gridCanvas = document.getElementById('gridCanvas');
        const bgTypeRadios = document.querySelectorAll('input[name="bg-type"]');
        const solidColorPickerContainer = document.getElementById('solid-color-picker');
        const imageUrlInputContainer = document.getElementById('image-url-input');
        const bgColorInput = document.getElementById('bg-color-input');
        const bgImageUrlInput = document.getElementById('bg-image-url');
        const setBgImageBtn = document.getElementById('set-image-bg-btn');

        const applyBackground = (settings) => {
            document.body.style.backgroundImage = 'none';
            document.body.style.backgroundColor = '';
            gridCanvas.style.display = 'none';

            switch(settings.type) {
                case 'solid': document.body.style.backgroundColor = settings.value; break;
                case 'image': document.body.style.backgroundImage = `url(${settings.value})`; break;
                case 'unsplash':
                    const unsplashUrl = `https://source.unsplash.com/random/1920x1080?nature,water,tech&t=${new Date().getDate()}`;
                    document.body.style.backgroundImage = `url(${unsplashUrl})`;
                    break;
                default: gridCanvas.style.display = 'block'; drawGrid(); break;
            }
            document.body.style.backgroundSize = 'cover';
            document.body.style.backgroundPosition = 'center';
        };

        let bgSettings = JSON.parse(localStorage.getItem('bgSettings_v2')) || { type: 'grid', value: '' };

        bgTypeRadios.forEach(radio => {
            radio.addEventListener('change', () => {
                const type = radio.value;
                solidColorPickerContainer.style.display = type === 'solid' ? 'flex' : 'none';
                imageUrlInputContainer.style.display = type === 'image' ? 'flex' : 'none';
                if (type !== 'solid' && type !== 'image') {
                    bgSettings = { type, value: '' };
                    localStorage.setItem('bgSettings_v2', JSON.stringify(bgSettings));
                    applyBackground(bgSettings);
                }
            });
        });
        bgColorInput.addEventListener('input', () => {
            bgSettings = { type: 'solid', value: bgColorInput.value };
            localStorage.setItem('bgSettings_v2', JSON.stringify(bgSettings));
            applyBackground(bgSettings);
        });
        setBgImageBtn.addEventListener('click', () => {
            if (bgImageUrlInput.value) {
                bgSettings = { type: 'image', value: bgImageUrlInput.value };
                localStorage.setItem('bgSettings_v2', JSON.stringify(bgSettings));
                applyBackground(bgSettings);
            }
        });
        
        const currentBgRadio = document.querySelector(`input[name="bg-type"][value="${bgSettings.type}"]`);
        if (currentBgRadio) {
            currentBgRadio.checked = true;
            currentBgRadio.dispatchEvent(new Event('change'));
            if(bgSettings.type === 'solid') bgColorInput.value = bgSettings.value;
            if(bgSettings.type === 'image') bgImageUrlInput.value = bgSettings.value;
        }
        
        // --- Code Formatter ---
        const inputCode = document.getElementById('input-code');
        const outputCode = document.getElementById('output-code');
        const languageSelect = document.getElementById('code-language');
        const indentSelect = document.getElementById('indent-size');
        const beautifyBtn = document.getElementById('beautify-btn');
        const minifyBtn = document.getElementById('minify-btn');
        const copyBtn = document.getElementById('copy-btn');
        const clearBtn = document.getElementById('clear-btn');
        
        languageSelect.addEventListener('change', () => { beautifyBtn.disabled = languageSelect.value === 'php'; });
        
        beautifyBtn.addEventListener('click', () => {
            const code = inputCode.value;
            const lang = languageSelect.value;
            const indentVal = indentSelect.value;
            const indent_char = indentVal === 'tab' ? '\t' : ' ';
            const indent_size = indentVal === 'tab' ? 1 : parseInt(indentVal, 10);
            const options = { indent_size, indent_char, max_preserve_newlines: 1, preserve_newlines: true };
            try {
                let result = '';
                if (lang === 'html') result = html_beautify(code, options);
                else if (lang === 'css') result = css_beautify(code, options);
                else if (lang === 'javascript') result = js_beautify(code, options);
                outputCode.value = result;
            } catch (e) { outputCode.value = `Error: ${e.message}`; }
        });
        minifyBtn.addEventListener('click', async () => {
            const code = inputCode.value;
            const lang = languageSelect.value;
            let result = '';
            try {
                if (lang === 'javascript') {
                    if (!window.Terser) throw new Error("Terser library not ready.");
                    const minifyResult = await window.Terser.minify(code);
                    if (minifyResult.error) throw minifyResult.error;
                    result = minifyResult.code;
                } else if (lang === 'css') {
                    result = code.replace(/\/\*[\s\S]*?\*\/|([^:]|^)\/\/.*$/gm, '$1').replace(/\s+/g, ' ').replace(/\s*([;:{},])\s*/g, '$1').replace(/;}/g, '}');
                } else if (lang === 'html') {
                    result = code.replace(/<!--[\s\S]*?-->/g, '').replace(/>\s+</g, '><').replace(/\s{2,}/g, ' ');
                } else if (lang === 'php') {
                    result = code.replace(/(\/\*[\s\S]*?\*\/)|(\/\/.*)|(^\s*#.*$)/gm, '').replace(/\s*(\r\n|\n|\r)\s*/gm, '').replace(/\s{2,}/g, ' ');
                }
                outputCode.value = result;
            } catch (e) { outputCode.value = `Error: ${e.message}`; }
        });
        copyBtn.addEventListener('click', () => {
            if (outputCode.value) {
                navigator.clipboard.writeText(outputCode.value).then(() => {
                    copyBtn.innerHTML = "<i class='bx bx-check'></i> Copied!";
                    setTimeout(() => { copyBtn.innerHTML = "<i class='bx bx-copy'></i> Copy"; }, 2000);
                });
            }
        });
        clearBtn.addEventListener('click', () => { inputCode.value = ''; outputCode.value = ''; });

        // --- Initial Load Calls ---
        applyBackground(bgSettings);
        
        // --- Remaining original logic ---
        const themeToggleButton = document.getElementById('themeToggle');
        const body = document.body;
        const themeLogo = document.querySelector('.theme-logo');
        function setTheme(theme) {
            body.dataset.theme = theme;
            themeLogo.src = theme === 'dark' ? themeLogo.dataset.darkSrc : 'images/logo.png';
            localStorage.setItem('themePreference', theme);
            drawGrid();
        }
        const savedTheme = localStorage.getItem('themePreference') || 'light';
        setTheme(savedTheme);
        themeToggleButton.addEventListener('click', () => {
            const newTheme = body.dataset.theme === 'light' ? 'dark' : 'light';
            setTheme(newTheme);
        });

        // Weather and Time (Static)
        const weatherTemp = document.querySelector('.weather-temp');
        const weatherIcon = document.querySelector('.weather-icon');
        fetch('https://api.open-meteo.com/v1/forecast?latitude=22.8420&longitude=88.6560&current=temperature_2m,weather_code&timezone=Asia/Kolkata').then(response => response.json()).then(data => {
            const temp = Math.round(data.current.temperature_2m);
            weatherTemp.textContent = `${temp}°C`;
            const iconMap = { 0: '01d', 1: '02d', 2: '03d', 3: '04d', 61: '10d', 80: '09d' };
            weatherIcon.style.backgroundImage = `url(https://openweathermap.org/img/wn/${iconMap[data.current.weather_code] || '01d'}.png)`;
        }).catch(error => console.error('Error fetching weather:', error));

        const timeDisplay = document.querySelector('.time-display');
        const hourHand = document.getElementById('hourHand');
        const minuteHand = document.getElementById('minuteHand');
        const secondHand = document.getElementById('secondHand');
        function updateTime() {
            const now = new Date();
            timeDisplay.textContent = now.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true });
            const hours = now.getHours() % 12;
            const minutes = now.getMinutes();
            const seconds = now.getSeconds();
            hourHand.setAttribute('transform', `rotate(${(hours * 30) + (minutes * 0.5)}, 12, 12)`);
            minuteHand.setAttribute('transform', `rotate(${minutes * 6}, 12, 12)`);
            secondHand.setAttribute('transform', `rotate(${seconds * 6}, 12, 12)`);
        }
        updateTime();
        setInterval(updateTime, 1000);
    });

    // --- Canvas Logic ---
    const canvas = document.getElementById('gridCanvas');
    const ctx = canvas.getContext('2d');
    function drawGrid() {
        if (canvas.style.display === 'none') return;
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        const gridSize = 50;
        const strokeColor = document.body.dataset.theme === 'dark' ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';
        ctx.strokeStyle = strokeColor;
        for (let x = 0; x <= canvas.width; x += gridSize) { ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x, canvas.height); ctx.stroke(); }
        for (let y = 0; y <= canvas.height; y += gridSize) { ctx.beginPath(); ctx.moveTo(0, y); ctx.lineTo(canvas.width, y); ctx.stroke(); }
    }
    window.addEventListener('resize', drawGrid);
    </script>
</body>
</html>
